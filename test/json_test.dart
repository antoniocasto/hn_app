import 'package:flutter_test/flutter_test.dart';
import 'package:hn_app/json_parsing.dart';

void main() {
  test("parses topstories.json", () {
    const jsonString =
        "[ 21572552, 21574834, 21572622, 21573694, 21572795, 21572827, 21575217, 21572264, 21571938, 21574095, 21571337, 21575042, 21572911, 21572184, 21575391, 21574089, 21572936, 21574080, 21569610, 21572557, 21572227, 21573095, 21568080, 21572573, 21572706, 21566589, 21565624, 21557879, 21572637, 21575003, 21567481, 21574511, 21567876, 21574487, 21567022, 21556328, 21570927, 21575138, 21570352, 21565841, 21567556, 21570219, 21572395, 21571971, 21567063, 21563309, 21566546, 21566530, 21567707, 21572355, 21567800, 21569096, 21566513, 21571519, 21568100, 21566635, 21571610, 21557063, 21571721, 21565372, 21569388, 21568749, 21564796, 21566921, 21567053, 21558467, 21567817, 21568014, 21573072, 21567845, 21570183, 21560101, 21573579, 21565093, 21558250, 21567895, 21567929, 21562823, 21554986, 21569506, 21555586, 21569837, 21564850, 21567592, 21567746, 21564990, 21565391, 21563871, 21564636, 21568414, 21567912, 21564873, 21562811, 21558793, 21559646, 21568413, 21567873, 21569826, 21572540, 21565030, 21567630, 21571780, 21567841, 21563849, 21571901, 21569244, 21556978, 21572367, 21567777, 21568379, 21566906, 21563868, 21559139, 21570482, 21567466, 21571033, 21552264, 21557523, 21570989, 21568175, 21569131, 21557902, 21560916, 21570384, 21562261, 21566335, 21565411, 21572490, 21557558, 21564108, 21571890, 21561613, 21561556, 21559918, 21559581, 21556955, 21571026, 21561715, 21547945, 21559546, 21558013, 21567124, 21571948, 21562433, 21550346, 21551585, 21557469, 21557890, 21564579, 21559787, 21557524, 21572271, 21560749, 21568362, 21558343, 21560660, 21569545, 21561585, 21560090, 21566985, 21561118, 21559541, 21571582, 21561803, 21551566, 21572317, 21570096, 21560177, 21565330, 21561652, 21560519, 21561435, 21561506, 21567785, 21563530, 21569862, 21558684, 21565105, 21568201, 21563070, 21553527, 21560902, 21546382, 21560083, 21571904, 21560714, 21553882, 21559973, 21558986, 21564270, 21565703, 21559873, 21551774, 21559568, 21569276, 21551976, 21559503, 21553496, 21569291, 21568820, 21544864, 21549460, 21559633, 21554416, 21545493, 21545184, 21549826, 21560996, 21568239, 21547850, 21565772, 21568162, 21557057, 21565907, 21567582, 21561136, 21570322, 21557309, 21554087, 21560254, 21559680, 21555168, 21571476, 21552420, 21559737, 21550445, 21561296, 21556894, 21566574, 21558317, 21556192, 21554459, 21565442, 21564164, 21566802, 21545145, 21560166, 21550491, 21555778, 21566767, 21558841, 21549332, 21556634, 21555954, 21555740, 21563752, 21555894, 21546539, 21558885, 21559406, 21563640, 21566859, 21570298, 21547312, 21557713, 21565234, 21565227, 21557974, 21558053, 21565564, 21565523, 21558575, 21570605, 21563355, 21552425, 21555238, 21545754, 21562805, 21559526, 21556077, 21548757, 21551753, 21551480, 21556619, 21544537, 21553295, 21570008, 21561725, 21564005, 21555205, 21565394, 21560164, 21552446, 21560143, 21568654, 21553948, 21553923, 21569738, 21571825, 21561075, 21569330, 21555041, 21545425, 21546682, 21551868, 21552152, 21568028, 21566010, 21559167, 21552543, 21557291, 21560536, 21566828, 21551468, 21548826, 21558792, 21564656, 21570544, 21557779, 21562295, 21545107, 21553018, 21560362, 21553711, 21545309, 21553630, 21557909, 21550516, 21560871, 21566365, 21547369, 21562589, 21558805, 21554900, 21556501, 21570594, 21553113, 21564113, 21567654, 21569020, 21564961, 21545291, 21558769, 21552928, 21544947, 21567308, 21568594, 21546534, 21546850, 21559830, 21552202, 21546143, 21547659, 21551764, 21559800, 21556733, 21559334, 21558200, 21564837, 21568029, 21569572, 21561415, 21569507, 21557278, 21552923, 21556472, 21555816, 21567545, 21565695, 21544712, 21557665, 21567492, 21552813, 21566084, 21569191, 21560796, 21555856, 21571169, 21554363, 21556801, 21571612, 21556492, 21568752, 21557985, 21554965, 21566244, 21552491, 21564246, 21547373, 21559783, 21559285, 21547171, 21561986, 21549209, 21546239, 21559394, 21568131, 21562402, 21552168, 21562963, 21564308, 21556898, 21546735, 21552934, 21556369, 21564889, 21546099, 21567528, 21557679, 21567482, 21545703, 21556731, 21567375, 21550031, 21567292, 21567261, 21552119, 21567178, 21551540, 21547958, 21566830, 21548858, 21566786, 21556169, 21566636, 21566610, 21548159, 21550436, 21566491, 21555974, 21557607, 21545830, 21544775, 21549760, 21552832, 21557314, 21546264, 21552851, 21545310, 21552289, 21552101, 21559377, 21554876, 21550483, 21552184, 21545374, 21545362, 21544836, 21564303, 21570348, 21545491, 21547313, 21552245, 21564161, 21554401, 21561453, 21560334, 21556124, 21563931, 21561262, 21563808, 21558444, 21553792, 21549732, 21544530, 21551871, 21570757, 21569682, 21552703, 21567209, 21563013, 21545595, 21560009, 21560633, 21570473, 21558421, 21553562, 21553322, 21548465, 21555810, 21555958, 21549367, 21568030, 21552081, 21553748, 21550645, 21560883, 21544531, 21552151, 21558737, 21547217, 21547041, 21558425, 21546193, 21544733, 21556649, 21546053, 21561915, 21546202, 21544797, 21559719, 21551217, 21551192, 21559625, 21551127, 21558347, 21562447, 21551732, 21549928, 21547109 ]";

    expect(parseTopStories(jsonString).first, 21572552);
  });

  test("parses item.json", () {
    const jsonString = """{
        "by" : "schappim",
  "descendants" : 477,
  "id" : 21572552,
  "kids" : [ 21572963, 21573194, 21573017, 21572794, 21572844, 21575632, 21574871, 21574849, 21574888, 21574565, 21573038, 21573813, 21575526, 21572900, 21572914, 21575157, 21572842, 21573062, 21573096, 21573103, 21572942, 21573455, 21572836, 21573069, 21572871, 21572999, 21573142, 21574688, 21573185 ],
  "score" : 544,
  "time" : 1574169450,
  "title" : "Sweden Drops Julian Assange Rape Investigation",
  "type" : "story",
  "url" : "https://www.bbc.com/news/world-europe-50473792"
}""";

    expect(parseArticle(jsonString).by, "schappim");
  });
}
